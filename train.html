<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Railway Traffic Control System - Indian Railways</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* CSS Variables for Theme */
        :root {
          --background: #ffffff;
          --foreground: #0a0a0a;
          --card: #ffffff;
          --card-foreground: #0a0a0a;
          --primary: #030213;
          --primary-foreground: #ffffff;
          --secondary: #f3f3f5;
          --secondary-foreground: #030213;
          --muted: #ececf0;
          --muted-foreground: #717182;
          --accent: #e9ebef;
          --accent-foreground: #030213;
          --destructive: #d4183d;
          --destructive-foreground: #ffffff;
          --border: rgba(0, 0, 0, 0.1);
          --input-background: #f3f3f5;
          --radius: 10px;
          --green-500: #22c55e;
          --red-500: #ef4444;
          --blue-500: #3b82f6;
          --yellow-500: #eab308;
          --purple-500: #a855f7;
          --orange-500: #f97316;
          --gray-500: #6b7280;
        }

        /* Dark mode */
        .dark {
          --background: #0a0a0a;
          --foreground: #ffffff;
          --card: #0a0a0a;
          --card-foreground: #ffffff;
          --primary: #ffffff;
          --primary-foreground: #0a0a0a;
          --secondary: #262626;
          --secondary-foreground: #ffffff;
          --muted: #262626;
          --muted-foreground: #a3a3a3;
          --accent: #262626;
          --accent-foreground: #ffffff;
          --border: #262626;
          --input-background: #262626;
        }

        /* Reset and Base Styles */
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
          background-color: var(--background);
          color: var(--foreground);
          line-height: 1.5;
        }

        /* App Layout */
        .app {
          height: 100vh;
          display: flex;
          flex-direction: column;
        }

        /* Header */
        .header {
          border-bottom: 1px solid var(--border);
          background-color: var(--card);
          padding: 1rem 1.5rem;
        }

        .header-content {
          display: flex;
          align-items: center;
          justify-content: space-between;
        }

        .header-left {
          display: flex;
          align-items: center;
          gap: 1rem;
        }

        .logo-section {
          display: flex;
          align-items: center;
          gap: 0.5rem;
        }

        .icon-train {
          font-size: 2rem;
          color: var(--primary);
        }

        .title-section h1 {
          font-size: 1.25rem;
          font-weight: 600;
          margin: 0;
        }

        .subtitle {
          font-size: 0.875rem;
          color: var(--muted-foreground);
          margin: 0;
        }

        .header-right {
          display: flex;
          align-items: center;
          gap: 1rem;
        }

        .status-badge {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          background-color: var(--secondary);
          padding: 0.5rem 0.75rem;
          border-radius: var(--radius);
          font-size: 0.875rem;
        }

        .status-indicator {
          width: 8px;
          height: 8px;
          background-color: var(--green-500);
          border-radius: 50%;
          animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        .current-time {
          font-size: 0.875rem;
          color: var(--muted-foreground);
        }

        /* Main Content */
        .main-content {
          flex: 1;
          display: flex;
          overflow: hidden;
        }

        /* Sidebar */
        .sidebar {
          width: 320px;
          border-right: 1px solid var(--border);
          background-color: var(--card);
          display: flex;
          flex-direction: column;
        }

        .tab-controls {
          display: grid;
          grid-template-columns: 1fr 1fr;
          margin: 1rem;
          background-color: var(--muted);
          border-radius: var(--radius);
          padding: 0.25rem;
        }

        .tab-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 0.5rem;
          padding: 0.5rem;
          background: none;
          border: none;
          border-radius: calc(var(--radius) - 0.25rem);
          cursor: pointer;
          transition: all 0.2s;
          color: var(--muted-foreground);
        }

        .tab-btn.active {
          background-color: var(--background);
          color: var(--foreground);
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .tab-content {
          flex: 1;
          overflow: hidden;
        }

        .tab-pane {
          display: none;
          padding: 1rem;
          height: 100%;
          overflow-y: auto;
        }

        .tab-pane.active {
          display: block;
        }

        /* Card Styles */
        .card {
          background-color: var(--card);
          border: 1px solid var(--border);
          border-radius: var(--radius);
          margin-bottom: 1rem;
        }

        .card-header {
          padding: 1rem;
          border-bottom: 1px solid var(--border);
          display: flex;
          align-items: center;
          justify-content: space-between;
        }

        .card-header h3 {
          font-size: 1rem;
          font-weight: 600;
          display: flex;
          align-items: center;
          gap: 0.5rem;
        }

        .card-content {
          padding: 1rem;
        }

        /* Search and Filters */
        .search-filters {
          margin-bottom: 1rem;
        }

        .search-box {
          position: relative;
          margin-bottom: 0.75rem;
        }

        .search-box i {
          position: absolute;
          left: 0.75rem;
          top: 50%;
          transform: translateY(-50%);
          color: var(--muted-foreground);
          font-size: 0.875rem;
        }

        .search-box input {
          width: 100%;
          padding: 0.5rem 0.75rem 0.5rem 2.5rem;
          border: 1px solid var(--border);
          border-radius: var(--radius);
          background-color: var(--input-background);
          font-size: 0.875rem;
        }

        .filter-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 0.5rem;
        }

        .filter-row select {
          padding: 0.5rem;
          border: 1px solid var(--border);
          border-radius: var(--radius);
          background-color: var(--input-background);
          font-size: 0.875rem;
        }

        /* Train List */
        .train-list {
          max-height: 320px;
          overflow-y: auto;
        }

        .train-item {
          border: 1px solid var(--border);
          border-radius: var(--radius);
          padding: 0.75rem;
          margin-bottom: 0.5rem;
          transition: background-color 0.2s;
        }

        .train-item:hover {
          background-color: var(--muted);
        }

        .train-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 0.5rem;
        }

        .train-info {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          flex: 1;
        }

        .train-number {
          font-weight: 600;
          font-size: 0.875rem;
        }

        .train-name {
          font-size: 0.75rem;
          color: var(--muted-foreground);
        }

        .train-status {
          display: flex;
          align-items: center;
          gap: 0.5rem;
        }

        .status-dot {
          width: 8px;
          height: 8px;
          border-radius: 50%;
        }

        .status-dot.on-time { background-color: var(--green-500); }
        .status-dot.delayed { background-color: var(--red-500); }
        .status-dot.approaching { background-color: var(--blue-500); }
        .status-dot.waiting { background-color: var(--yellow-500); }
        .status-dot.departed { background-color: var(--gray-500); }

        .train-details {
          font-size: 0.75rem;
          color: var(--muted-foreground);
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 0.25rem;
        }

        .delay-info {
          color: var(--red-500);
          font-weight: 600;
        }

        /* Badge Styles */
        .badge {
          display: inline-flex;
          align-items: center;
          padding: 0.25rem 0.5rem;
          font-size: 0.75rem;
          font-weight: 500;
          border-radius: calc(var(--radius) / 2);
          background-color: var(--secondary);
          color: var(--secondary-foreground);
        }

        .badge.priority-1 { background-color: var(--red-500); color: white; }
        .badge.priority-2 { background-color: var(--orange-500); color: white; }
        .badge.priority-3 { background-color: var(--yellow-500); color: black; }
        .badge.destructive { background-color: var(--destructive); color: var(--destructive-foreground); }
        .badge.success { background-color: var(--green-500); color: white; }

        /* Button Styles */
        .btn {
          display: inline-flex;
          align-items: center;
          justify-content: center;
          gap: 0.5rem;
          padding: 0.5rem 1rem;
          font-size: 0.875rem;
          font-weight: 500;
          border: none;
          border-radius: var(--radius);
          cursor: pointer;
          transition: all 0.2s;
          text-decoration: none;
        }

        .btn-primary {
          background-color: var(--primary);
          color: var(--primary-foreground);
        }

        .btn-primary:hover {
          opacity: 0.9;
        }

        .btn-outline {
          background-color: transparent;
          color: var(--foreground);
          border: 1px solid var(--border);
        }

        .btn-outline:hover {
          background-color: var(--accent);
        }

        .btn-sm {
          padding: 0.25rem 0.75rem;
          font-size: 0.75rem;
        }

        .btn.active {
          background-color: var(--primary);
          color: var(--primary-foreground);
        }

        /* Critical Alert */
        .critical-alert {
          display: flex;
          align-items: start;
          gap: 0.75rem;
          padding: 1rem;
          background-color: #fef2f2;
          border: 1px solid #fecaca;
          border-radius: var(--radius);
          margin-bottom: 1rem;
        }

        .critical-alert i {
          color: var(--red-500);
          margin-top: 0.125rem;
        }

        .critical-alert strong {
          color: #dc2626;
        }

        .critical-alert p {
          color: #b91c1c;
          margin: 0;
          font-size: 0.875rem;
        }

        /* Conflicts List */
        .section-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 0.75rem;
        }

        .section-header h4 {
          font-size: 0.875rem;
          font-weight: 600;
        }

        .conflicts-list {
          max-height: 280px;
          overflow-y: auto;
        }

        .conflict-item {
          border: 1px solid var(--border);
          border-radius: var(--radius);
          padding: 0.75rem;
          margin-bottom: 0.5rem;
        }

        .conflict-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 0.5rem;
        }

        .conflict-type {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-weight: 600;
          font-size: 0.875rem;
        }

        .conflict-details {
          font-size: 0.75rem;
          color: var(--muted-foreground);
          margin-bottom: 0.75rem;
        }

        .ai-recommendation {
          background-color: var(--muted);
          padding: 0.5rem;
          border-radius: calc(var(--radius) / 2);
          margin-bottom: 0.75rem;
        }

        .recommendation-header {
          display: flex;
          align-items: center;
          gap: 0.25rem;
          font-weight: 600;
          font-size: 0.75rem;
          margin-bottom: 0.25rem;
        }

        .recommendation-text {
          font-size: 0.75rem;
        }

        .conflict-actions {
          display: flex;
          gap: 0.5rem;
        }

        /* Dashboard Area */
        .dashboard-area {
          flex: 1;
          display: flex;
          flex-direction: column;
          overflow: hidden;
        }

        /* KPI Section */
        .kpi-section {
          padding: 1.5rem;
          border-bottom: 1px solid var(--border);
        }

        .kpi-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 1rem;
        }

        .kpi-header h2 {
          font-size: 1.25rem;
          font-weight: 600;
          margin: 0;
        }

        .kpi-header p {
          font-size: 0.875rem;
          color: var(--muted-foreground);
          margin: 0;
        }

        .kpi-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
          gap: 1rem;
        }

        .kpi-card {
          background-color: var(--card);
          border: 1px solid var(--border);
          border-radius: var(--radius);
          padding: 1rem;
        }

        .kpi-header-section {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 0.75rem;
        }

        .kpi-icon {
          padding: 0.5rem;
          border-radius: var(--radius);
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .kpi-icon.green { background-color: #dcfce7; color: var(--green-500); }
        .kpi-icon.red { background-color: #fef2f2; color: var(--red-500); }
        .kpi-icon.blue { background-color: #dbeafe; color: var(--blue-500); }
        .kpi-icon.yellow { background-color: #fefce8; color: var(--yellow-500); }
        .kpi-icon.purple { background-color: #faf5ff; color: var(--purple-500); }

        .kpi-value {
          font-size: 1.5rem;
          font-weight: 600;
          margin-bottom: 0.25rem;
        }

        .kpi-label {
          font-size: 0.875rem;
          color: var(--muted-foreground);
        }

        .trend-indicator {
          display: flex;
          align-items: center;
          gap: 0.25rem;
          font-size: 0.75rem;
        }

        .trend-up { color: var(--green-500); }
        .trend-down { color: var(--red-500); }

        /* Visualization Section */
        .visualization-section {
          flex: 1;
          padding: 1.5rem;
          display: grid;
          grid-template-columns: 2fr 1fr;
          gap: 1.5rem;
          overflow: hidden;
        }

        .track-layout-card {
          background-color: var(--card);
          border: 1px solid var(--border);
          border-radius: var(--radius);
          display: flex;
          flex-direction: column;
          overflow: hidden;
        }

        .layout-controls {
          display: flex;
          gap: 0.5rem;
        }

        .track-legend {
          display: flex;
          align-items: center;
          gap: 1rem;
          margin-bottom: 1rem;
          font-size: 0.875rem;
        }

        .legend-item {
          display: flex;
          align-items: center;
          gap: 0.5rem;
        }

        .legend-color {
          width: 12px;
          height: 12px;
          border-radius: 2px;
        }

        .legend-color.free { background-color: var(--green-500); }
        .legend-color.occupied { background-color: var(--red-500); }
        .legend-color.maintenance { background-color: var(--yellow-500); }

        .track-layout {
          flex: 1;
          overflow-y: auto;
        }

        .track-section {
          margin-bottom: 1.5rem;
        }

        .track-section h4 {
          font-size: 0.875rem;
          font-weight: 600;
          margin-bottom: 0.75rem;
        }

        .track-lines {
          display: flex;
          flex-direction: column;
          gap: 0.75rem;
        }

        .track-line {
          height: 32px;
          border: 2px solid var(--border);
          border-radius: var(--radius);
          position: relative;
          display: flex;
          align-items: center;
          padding: 0 0.75rem;
          cursor: pointer;
          transition: all 0.2s;
        }

        .track-line:hover {
          border-color: var(--primary);
        }

        .track-line.occupied {
          background-color: rgba(239, 68, 68, 0.1);
          border-color: var(--red-500);
        }

        .track-line.free {
          background-color: rgba(34, 197, 94, 0.1);
          border-color: var(--green-500);
        }

        .track-line.maintenance {
          background-color: rgba(234, 179, 8, 0.1);
          border-color: var(--yellow-500);
        }

        .track-name {
          font-size: 0.75rem;
          font-weight: 600;
        }

        .track-train {
          position: absolute;
          top: 2px;
          height: 24px;
          width: 32px;
          border-radius: 4px;
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
          font-size: 0.75rem;
          transition: left 0.5s ease;
        }

        .track-train.express { background-color: var(--blue-500); }
        .track-train.local { background-color: var(--green-500); }
        .track-train.freight { background-color: var(--orange-500); }
        .track-train.maintenance { background-color: var(--yellow-500); }

        .platforms-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 0.75rem;
        }

        .platform {
          height: 64px;
          border: 2px solid var(--border);
          border-radius: var(--radius);
          padding: 0.5rem;
          cursor: pointer;
          transition: all 0.2s;
        }

        .platform:hover {
          border-color: var(--primary);
        }

        .platform.occupied {
          background-color: rgba(239, 68, 68, 0.1);
          border-color: var(--red-500);
        }

        .platform.free {
          background-color: rgba(34, 197, 94, 0.1);
          border-color: var(--green-500);
        }

        .platform-name {
          font-size: 0.75rem;
          font-weight: 600;
        }

        .platform-status {
          font-size: 0.75rem;
          color: var(--muted-foreground);
          margin-top: 0.25rem;
        }

        /* Side Panels */
        .side-panels {
          display: flex;
          flex-direction: column;
          gap: 1.5rem;
          overflow-y: auto;
        }

        /* Operations Overview */
        .stats-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 0.75rem;
          margin-bottom: 1rem;
        }

        .stat-card {
          padding: 0.75rem;
          border-radius: var(--radius);
        }

        .stat-card.on-time {
          background-color: rgba(34, 197, 94, 0.1);
        }

        .stat-card.delayed {
          background-color: rgba(239, 68, 68, 0.1);
        }

        .stat-header {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-size: 0.875rem;
          margin-bottom: 0.25rem;
        }

        .stat-value {
          font-size: 1.5rem;
          font-weight: 600;
        }

        .stat-value.on-time { color: var(--green-500); }
        .stat-value.delayed { color: var(--red-500); }

        .punctuality-section {
          margin-bottom: 1rem;
        }

        .punctuality-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 0.5rem;
          font-size: 0.875rem;
        }

        .progress-bar {
          width: 100%;
          height: 8px;
          background-color: var(--muted);
          border-radius: 4px;
          overflow: hidden;
        }

        .progress-fill {
          height: 100%;
          background-color: var(--green-500);
          transition: width 0.3s ease;
        }

        .active-trains {
          max-height: 200px;
          overflow-y: auto;
        }

        .train-item-small {
          padding: 0.5rem;
          border: 1px solid var(--border);
          border-radius: var(--radius);
          margin-bottom: 0.5rem;
          font-size: 0.75rem;
        }

        .train-header-small {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 0.25rem;
        }

        /* Alerts System */
        .alerts-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 1rem;
        }

        .alerts-status {
          display: flex;
          align-items: center;
          gap: 0.75rem;
        }

        .alerts-filters {
          display: flex;
          gap: 0.25rem;
          margin-bottom: 1rem;
        }

        .alerts-list {
          max-height: 320px;
          overflow-y: auto;
        }

        .alert-item {
          border: 1px solid var(--border);
          border-radius: var(--radius);
          padding: 0.75rem;
          margin-bottom: 0.5rem;
        }

        .alert-item.unacknowledged {
          border-left: 4px solid var(--primary);
          background-color: rgba(3, 2, 19, 0.05);
        }

        .alert-header {
          display: flex;
          align-items: start;
          justify-content: space-between;
          gap: 0.5rem;
          margin-bottom: 0.5rem;
        }

        .alert-content {
          flex: 1;
        }

        .alert-title {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-weight: 600;
          font-size: 0.875rem;
          margin-bottom: 0.25rem;
        }

        .alert-message {
          font-size: 0.75rem;
          color: var(--muted-foreground);
          margin-bottom: 0.5rem;
        }

        .alert-meta {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-size: 0.75rem;
          color: var(--muted-foreground);
        }

        .alert-actions {
          display: flex;
          align-items: center;
          gap: 0.25rem;
        }

        /* Simulation Styles */
        .simulation-mode {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 1rem;
        }

        .toggle-switch {
          display: flex;
          align-items: center;
          gap: 0.5rem;
        }

        .toggle-label {
          font-size: 0.875rem;
          color: var(--muted-foreground);
        }

        .toggle-label.active {
          color: var(--foreground);
          font-weight: 600;
        }

        .scenarios-list {
          margin-bottom: 1rem;
        }

        .scenario-item {
          border: 1px solid var(--border);
          border-radius: var(--radius);
          padding: 0.75rem;
          margin-bottom: 0.5rem;
          cursor: pointer;
          transition: all 0.2s;
        }

        .scenario-item:hover {
          background-color: var(--muted);
        }

        .scenario-item.selected {
          border-color: var(--primary);
          background-color: rgba(3, 2, 19, 0.05);
        }

        .scenario-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 0.25rem;
        }

        .scenario-name {
          font-weight: 600;
          font-size: 0.875rem;
        }

        .scenario-description {
          font-size: 0.75rem;
          color: var(--muted-foreground);
          margin-bottom: 0.5rem;
        }

        .scenario-metrics {
          display: flex;
          gap: 0.5rem;
          font-size: 0.75rem;
        }

        .custom-params {
          margin-bottom: 1rem;
        }

        .param-group {
          margin-bottom: 0.75rem;
        }

        .param-group label {
          display: block;
          font-size: 0.875rem;
          font-weight: 500;
          margin-bottom: 0.5rem;
        }

        .param-group input[type="range"] {
          width: 100%;
          margin-bottom: 0.5rem;
        }

        .param-group input[type="number"],
        .param-group select {
          width: 100%;
          padding: 0.5rem;
          border: 1px solid var(--border);
          border-radius: var(--radius);
          background-color: var(--input-background);
        }

        .param-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 0.75rem;
        }

        .simulation-controls {
          display: flex;
          gap: 0.5rem;
          margin-bottom: 1rem;
        }

        .simulation-results {
          border: 1px solid var(--border);
          border-radius: var(--radius);
          padding: 1rem;
        }

        .results-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 0.75rem;
          margin-bottom: 1rem;
        }

        .result-card {
          background-color: var(--muted);
          padding: 0.75rem;
          border-radius: var(--radius);
          text-align: center;
        }

        .result-label {
          font-size: 0.75rem;
          color: var(--muted-foreground);
          margin-bottom: 0.25rem;
        }

        .result-value {
          font-size: 1.25rem;
          font-weight: 600;
        }

        .recommendations {
          margin-bottom: 1rem;
        }

        .recommendation-item {
          display: flex;
          align-items: start;
          gap: 0.5rem;
          padding: 0.5rem;
          background-color: rgba(34, 197, 94, 0.1);
          border-radius: var(--radius);
          margin-bottom: 0.5rem;
          font-size: 0.875rem;
        }

        /* Utility Classes */
        .hidden { display: none !important; }
        .text-center { text-align: center; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .gap-2 { gap: 0.5rem; }
        .gap-4 { gap: 1rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-4 { margin-bottom: 1rem; }
        .flex-1 { flex: 1; }

        /* Animations */
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
          }
          50% {
            opacity: .5;
          }
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
          .visualization-section {
            grid-template-columns: 1fr;
          }
          
          .kpi-grid {
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
          }
        }

        @media (max-width: 768px) {
          .sidebar {
            width: 280px;
          }
          
          .header-content {
            flex-direction: column;
            gap: 1rem;
          }
          
          .stats-grid {
            grid-template-columns: 1fr;
          }
          
          .platforms-grid {
            grid-template-columns: repeat(2, 1fr);
          }
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-left">
                    <div class="logo-section">
                        <i class="fas fa-train icon-train"></i>
                        <div class="title-section">
                            <h1>Railway Traffic Control System</h1>
                            <p class="subtitle">Intelligent Decision Support • Section Controller Dashboard</p>
                        </div>
                    </div>
                </div>
                <div class="header-right">
                    <div class="status-badge">
                        <div class="status-indicator"></div>
                        Real-time Active
                    </div>
                    <div class="current-time" id="currentTime"></div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="tab-controls">
                    <button class="tab-btn active" data-tab="dashboard">
                        <i class="fas fa-chart-line"></i>
                        Control
                    </button>
                    <button class="tab-btn" data-tab="simulation">
                        <i class="fas fa-cogs"></i>
                        Simulate
                    </button>
                </div>

                <div class="tab-content">
                    <!-- Dashboard Tab -->
                    <div class="tab-pane active" id="dashboard-tab">
                        <!-- Train Status Panel -->
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-train"></i> Train Status Monitor</h3>
                            </div>
                            <div class="card-content">
                                <div class="search-filters">
                                    <div class="search-box">
                                        <i class="fas fa-search"></i>
                                        <input type="text" id="trainSearch" placeholder="Search by train number or name...">
                                    </div>
                                    <div class="filter-row">
                                        <select id="statusFilter">
                                            <option value="all">All Status</option>
                                            <option value="on-time">On Time</option>
                                            <option value="delayed">Delayed</option>
                                            <option value="approaching">Approaching</option>
                                            <option value="waiting">Waiting</option>
                                            <option value="departed">Departed</option>
                                        </select>
                                        <select id="typeFilter">
                                            <option value="all">All Types</option>
                                            <option value="express">Express</option>
                                            <option value="local">Local</option>
                                            <option value="freight">Freight</option>
                                            <option value="maintenance">Maintenance</option>
                                            <option value="special">Special</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="train-list" id="trainList"></div>
                            </div>
                        </div>

                        <!-- Decision Support Panel -->
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-brain"></i> AI Decision Support</h3>
                            </div>
                            <div class="card-content">
                                <div id="criticalAlert" class="critical-alert hidden">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    <div>
                                        <strong>Critical Conflicts Detected</strong>
                                        <p>Immediate action required to prevent delays and ensure safety.</p>
                                    </div>
                                </div>
                                <div class="conflicts-section">
                                    <div class="section-header">
                                        <h4>Active Conflicts</h4>
                                        <span class="badge" id="conflictsCount">3 Total</span>
                                    </div>
                                    <div id="conflictsList" class="conflicts-list"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Simulation Tab -->
                    <div class="tab-pane" id="simulation-tab">
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-cogs"></i> What-If Simulation</h3>
                            </div>
                            <div class="card-content">
                                <div class="simulation-mode">
                                    <label>Simulation Mode</label>
                                    <div class="toggle-switch">
                                        <span class="toggle-label active">Predefined</span>
                                        <input type="checkbox" id="simModeToggle">
                                        <span class="toggle-label">Custom</span>
                                    </div>
                                </div>

                                <div id="predefinedScenarios" class="scenarios-section">
                                    <label>Select Scenario</label>
                                    <div class="scenarios-list" id="scenariosList"></div>
                                </div>

                                <div id="customParameters" class="custom-params hidden">
                                    <div class="param-group">
                                        <label>Traffic Density: <span id="densityValue">75</span>%</label>
                                        <input type="range" id="trafficDensity" min="20" max="100" value="75">
                                    </div>
                                    <div class="param-row">
                                        <div class="param-group">
                                            <label>Weather</label>
                                            <select id="weatherConditions">
                                                <option value="clear">Clear</option>
                                                <option value="rain">Rain</option>
                                                <option value="fog">Fog</option>
                                                <option value="storm">Storm</option>
                                            </select>
                                        </div>
                                        <div class="param-group">
                                            <label>Maintenance Blocks</label>
                                            <input type="number" id="maintenanceBlocks" min="0" max="5" value="1">
                                        </div>
                                    </div>
                                    <div class="param-group">
                                        <label>Emergency Events</label>
                                        <input type="checkbox" id="emergencyEvents">
                                    </div>
                                </div>

                                <div class="simulation-controls">
                                    <button id="runSimulation" class="btn btn-primary">
                                        <i class="fas fa-play"></i>
                                        Run Simulation
                                    </button>
                                    <button id="resetSimulation" class="btn btn-outline">
                                        <i class="fas fa-undo"></i>
                                    </button>
                                </div>

                                <div id="simulationResults" class="simulation-results hidden"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Dashboard Area -->
            <div class="dashboard-area">
                <!-- KPI Dashboard -->
                <div class="kpi-section">
                    <div class="kpi-header">
                        <div>
                            <h2>Performance Dashboard</h2>
                            <p>Real-time section performance metrics and trends</p>
                        </div>
                        <div class="status-badge">
                            <i class="fas fa-chart-line"></i>
                            Live Monitoring
                        </div>
                    </div>
                    <div class="kpi-grid" id="kpiGrid"></div>
                </div>

                <!-- Central Visualization -->
                <div class="visualization-section">
                    <!-- Track Layout -->
                    <div class="track-layout-card">
                        <div class="card-header">
                            <h3><i class="fas fa-train"></i> Track Layout & Train Positions</h3>
                            <div class="layout-controls">
                                <button class="btn btn-sm active" data-view="schematic">Schematic</button>
                                <button class="btn btn-sm" data-view="detailed">Detailed</button>
                            </div>
                        </div>
                        <div class="card-content">
                            <div class="track-legend">
                                <div class="legend-item">
                                    <div class="legend-color free"></div>
                                    <span>Free</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-color occupied"></div>
                                    <span>Occupied</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-color maintenance"></div>
                                    <span>Maintenance</span>
                                </div>
                            </div>
                            <div class="track-layout" id="trackLayout"></div>
                        </div>
                    </div>

                    <!-- Side Panels -->
                    <div class="side-panels">
                        <!-- Operations Overview -->
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-chart-bar"></i> Operations Overview</h3>
                            </div>
                            <div class="card-content">
                                <div id="operationsOverview"></div>
                            </div>
                        </div>

                        <!-- Active Alerts -->
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-bolt"></i> Active Alerts</h3>
                            </div>
                            <div class="card-content">
                                <div id="alertsSystem"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Railway Traffic Control System - JavaScript

        // Global State
        let state = {
          activeTab: 'dashboard',
          currentTime: new Date(),
          searchTerm: '',
          statusFilter: 'all',
          typeFilter: 'all',
          simulationMode: 'predefined',
          selectedScenario: '',
          isSimulationRunning: false,
          alertFilter: 'unacknowledged',
          layoutView: 'schematic',
          implementedActions: []
        };

        // Mock Data
        const mockTrains = [
          {
            id: '1',
            number: '12002',
            name: 'Shatabdi Express',
            type: 'express',
            priority: 1,
            status: 'approaching',
            currentLocation: 'Kalyan Junction',
            destination: 'Mumbai CST',
            scheduledTime: '14:30',
            actualTime: '14:35',
            delay: 5,
            platformAssigned: '3',
            estimatedArrival: '14:37'
          },
          {
            id: '2',
            number: '12951',
            name: 'Mumbai Rajdhani',
            type: 'express',
            priority: 1,
            status: 'on-time',
            currentLocation: 'Platform 1',
            destination: 'New Delhi',
            scheduledTime: '15:45',
            actualTime: '15:45',
            delay: 0,
            platformAssigned: '1',
            estimatedArrival: '15:45'
          },
          {
            id: '3',
            number: 'L-4201',
            name: 'Local Passenger',
            type: 'local',
            priority: 3,
            status: 'waiting',
            currentLocation: 'Outer Signal',
            destination: 'Dadar',
            scheduledTime: '14:25',
            actualTime: '14:40',
            delay: 15,
            estimatedArrival: '14:42'
          },
          {
            id: '4',
            number: 'FR-7823',
            name: 'Freight Special',
            type: 'freight',
            priority: 4,
            status: 'delayed',
            currentLocation: 'Loop Line',
            destination: 'JNPT',
            scheduledTime: '13:00',
            actualTime: '14:45',
            delay: 105,
            estimatedArrival: '15:30'
          },
          {
            id: '5',
            number: '22222',
            name: 'Duronto Express',
            type: 'express',
            priority: 2,
            status: 'on-time',
            currentLocation: 'Approaching Signal',
            destination: 'Howrah',
            scheduledTime: '16:00',
            actualTime: '16:00',
            delay: 0,
            estimatedArrival: '16:00'
          },
          {
            id: '6',
            number: 'MAINT-01',
            name: 'Track Maintenance',
            type: 'maintenance',
            priority: 5,
            status: 'departed',
            currentLocation: 'Yard',
            destination: 'Section 4B',
            scheduledTime: '12:00',
            actualTime: '12:15',
            delay: 15,
            estimatedArrival: '13:30'
          }
        ];

        const mockConflicts = [
          {
            id: '1',
            conflictType: 'crossing',
            trainsInvolved: ['12002', 'L-4201'],
            severity: 'high',
            recommendedAction: 'Hold Local L-4201 at Outer Signal for 3 minutes. Allow Shatabdi Express 12002 priority crossing.',
            impactMinutes: 3,
            location: 'Junction A-12'
          },
          {
            id: '2',
            conflictType: 'platform',
            trainsInvolved: ['22222', '12951'],
            severity: 'medium',
            recommendedAction: 'Redirect Duronto 22222 to Platform 2. Keep Rajdhani 12951 on Platform 1 as scheduled.',
            impactMinutes: 2,
            location: 'Platform Complex'
          },
          {
            id: '3',
            conflictType: 'track-occupied',
            trainsInvolved: ['FR-7823'],
            severity: 'low',
            recommendedAction: 'Move Freight FR-7823 to Loop Line. Clear main line for passenger traffic.',
            impactMinutes: 5,
            location: 'Main Line Section 3'
          }
        ];

        const trackSections = [
          { id: 'main-1', name: 'Main Line 1', type: 'main', status: 'occupied', occupiedBy: '12002', capacity: 1, length: 2000 },
          { id: 'main-2', name: 'Main Line 2', type: 'main', status: 'free', capacity: 1, length: 1800 },
          { id: 'loop-1', name: 'Loop Line A', type: 'loop', status: 'occupied', occupiedBy: 'FR-7823', capacity: 1, length: 1200 },
          { id: 'loop-2', name: 'Loop Line B', type: 'loop', status: 'free', capacity: 1, length: 1000 },
          { id: 'platform-1', name: 'Platform 1', type: 'platform', status: 'occupied', occupiedBy: '12951', capacity: 1, length: 400 },
          { id: 'platform-2', name: 'Platform 2', type: 'platform', status: 'free', capacity: 1, length: 400 },
          { id: 'platform-3', name: 'Platform 3', type: 'platform', status: 'free', capacity: 1, length: 400 },
          { id: 'yard-1', name: 'Coaching Yard', type: 'yard', status: 'maintenance', capacity: 5, length: 800 },
          { id: 'junction-a', name: 'Junction A-12', type: 'junction', status: 'free', capacity: 2, length: 200 }
        ];

        const trainPositions = [
          { trainId: '1', trainNumber: '12002', sectionId: 'main-1', position: 75, direction: 'up', speed: 45, type: 'express' },
          { trainId: '2', trainNumber: '12951', sectionId: 'platform-1', position: 50, direction: 'up', speed: 0, type: 'express' },
          { trainId: '4', trainNumber: 'FR-7823', sectionId: 'loop-1', position: 30, direction: 'down', speed: 15, type: 'freight' },
          { trainId: '3', trainNumber: 'L-4201', sectionId: 'main-2', position: 10, direction: 'up', speed: 25, type: 'local' }
        ];

        const predefinedScenarios = [
          {
            id: '1',
            name: 'Peak Hour Rush',
            description: 'Simulate evening rush hour with maximum traffic density',
            parameters: {
              trafficDensity: 95,
              weatherConditions: 'clear',
              maintenanceBlocks: 0,
              emergencyEvents: false
            },
            expectedOutcome: {
              punctuality: 75,
              averageDelay: 8.5,
              conflicts: 12
            }
          },
          {
            id: '2',
            name: 'Monsoon Operations',
            description: 'Heavy rain conditions with reduced visibility and speed restrictions',
            parameters: {
              trafficDensity: 70,
              weatherConditions: 'rain',
              maintenanceBlocks: 1,
              emergencyEvents: true
            },
            expectedOutcome: {
              punctuality: 62,
              averageDelay: 15.2,
              conflicts: 18
            }
          },
          {
            id: '3',
            name: 'Maintenance Window',
            description: 'Planned maintenance with reduced track availability',
            parameters: {
              trafficDensity: 40,
              weatherConditions: 'clear',
              maintenanceBlocks: 3,
              emergencyEvents: false
            },
            expectedOutcome: {
              punctuality: 85,
              averageDelay: 6.8,
              conflicts: 8
            }
          },
          {
            id: '4',
            name: 'Emergency Response',
            description: 'Multiple emergency events with service disruptions',
            parameters: {
              trafficDensity: 80,
              weatherConditions: 'clear',
              maintenanceBlocks: 0,
              emergencyEvents: true
            },
            expectedOutcome: {
              punctuality: 45,
              averageDelay: 25.3,
              conflicts: 28
            }
          }
        ];

        let mockAlerts = [
          {
            id: '1',
            type: 'critical',
            category: 'safety',
            title: 'Signal Failure',
            message: 'Automatic signal failure detected at Junction A-12. Manual control activated.',
            timestamp: new Date(Date.now() - 5 * 60 * 1000),
            acknowledged: false,
            actionRequired: true,
            location: 'Junction A-12',
            relatedTrains: ['12002', 'L-4201']
          },
          {
            id: '2',
            type: 'warning',
            category: 'operational',
            title: 'Platform Overcrowding',
            message: 'Platform 3 passenger density exceeding safe limits. Consider train redirection.',
            timestamp: new Date(Date.now() - 12 * 60 * 1000),
            acknowledged: false,
            actionRequired: true,
            location: 'Platform 3'
          },
          {
            id: '3',
            type: 'warning',
            category: 'weather',
            title: 'Heavy Rain Alert',
            message: 'Monsoon conditions detected. Speed restrictions recommended for freight trains.',
            timestamp: new Date(Date.now() - 25 * 60 * 1000),
            acknowledged: true,
            actionRequired: false,
            relatedTrains: ['FR-7823']
          },
          {
            id: '4',
            type: 'info',
            category: 'system',
            title: 'AI Optimization Complete',
            message: 'Route optimization completed. New schedule can improve punctuality by 8%.',
            timestamp: new Date(Date.now() - 30 * 60 * 1000),
            acknowledged: false,
            actionRequired: false
          },
          {
            id: '5',
            type: 'success',
            category: 'operational',
            title: 'Conflict Resolved',
            message: 'Train crossing conflict between 12002 and L-4201 successfully resolved.',
            timestamp: new Date(Date.now() - 8 * 60 * 1000),
            acknowledged: true,
            actionRequired: false,
            relatedTrains: ['12002', 'L-4201']
          }
        ];

        // Initialize Application
        document.addEventListener('DOMContentLoaded', function() {
          initializeEventListeners();
          updateCurrentTime();
          renderTrainList();
          renderConflicts();
          renderKPIDashboard();
          renderTrackLayout();
          renderOperationsOverview();
          renderAlertsSystem();
          renderScenariosList();
          
          // Start real-time updates
          setInterval(updateCurrentTime, 1000);
          setInterval(updateRealTimeData, 5000);
        });

        // Event Listeners
        function initializeEventListeners() {
          // Tab switching
          document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
              switchTab(this.dataset.tab);
            });
          });

          // Search and filters
          document.getElementById('trainSearch').addEventListener('input', function() {
            state.searchTerm = this.value;
            renderTrainList();
          });

          document.getElementById('statusFilter').addEventListener('change', function() {
            state.statusFilter = this.value;
            renderTrainList();
          });

          document.getElementById('typeFilter').addEventListener('change', function() {
            state.typeFilter = this.value;
            renderTrainList();
          });

          // Layout view toggle
          document.querySelectorAll('[data-view]').forEach(btn => {
            btn.addEventListener('click', function() {
              state.layoutView = this.dataset.view;
              updateLayoutViewButtons();
              renderTrackLayout();
            });
          });

          // Simulation controls
          document.getElementById('simModeToggle').addEventListener('change', function() {
            state.simulationMode = this.checked ? 'custom' : 'predefined';
            toggleSimulationMode();
          });

          document.getElementById('trafficDensity').addEventListener('input', function() {
            document.getElementById('densityValue').textContent = this.value;
          });

          document.getElementById('runSimulation').addEventListener('click', runSimulation);
          document.getElementById('resetSimulation').addEventListener('click', resetSimulation);
        }

        // Tab Management
        function switchTab(tabName) {
          state.activeTab = tabName;
          
          // Update tab buttons
          document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.classList.toggle('active', btn.dataset.tab === tabName);
          });
          
          // Update tab content
          document.querySelectorAll('.tab-pane').forEach(pane => {
            pane.classList.toggle('active', pane.id === `${tabName}-tab`);
          });
        }

        // Time Management
        function updateCurrentTime() {
          state.currentTime = new Date();
          document.getElementById('currentTime').textContent = state.currentTime.toLocaleTimeString('en-IN');
        }

        // Train List Rendering
        function renderTrainList() {
          const filteredTrains = mockTrains.filter(train => {
            const matchesSearch = train.number.toLowerCase().includes(state.searchTerm.toLowerCase()) ||
                                 train.name.toLowerCase().includes(state.searchTerm.toLowerCase());
            const matchesStatus = state.statusFilter === 'all' || train.status === state.statusFilter;
            const matchesType = state.typeFilter === 'all' || train.type === state.typeFilter;
            
            return matchesSearch && matchesStatus && matchesType;
          });

          const container = document.getElementById('trainList');
          
          if (filteredTrains.length === 0) {
            container.innerHTML = `
              <div class="text-center" style="padding: 2rem; color: var(--muted-foreground);">
                <i class="fas fa-train" style="font-size: 2rem; opacity: 0.5; margin-bottom: 0.5rem; display: block;"></i>
                <p>No trains match your search criteria</p>
              </div>
            `;
            return;
          }

          container.innerHTML = filteredTrains.map(train => `
            <div class="train-item">
              <div class="train-header">
                <div class="train-info">
                  <span class="train-emoji">${getTrainEmoji(train.type)}</span>
                  <div>
                    <div class="train-number">${train.number}</div>
                    <div class="train-name">${train.name}</div>
                  </div>
                </div>
                <div class="train-status">
                  <span class="badge priority-${train.priority}">P${train.priority}</span>
                  <div class="status-dot ${train.status}"></div>
                </div>
              </div>
              <div class="train-details">
                <div>
                  <i class="fas fa-map-marker-alt"></i>
                  ${train.currentLocation} → ${train.destination}
                </div>
                ${train.delay > 0 ? `<div class="delay-info">+${train.delay}m</div>` : ''}
              </div>
              <div class="train-details">
                <div>
                  <i class="fas fa-clock"></i>
                  Sch: ${train.scheduledTime}
                </div>
                <div class="badge ${getStatusBadgeClass(train.status)}">${formatStatus(train.status)}</div>
              </div>
              ${train.platformAssigned ? `
                <div class="train-details">
                  Platform ${train.platformAssigned} • ETA: ${train.estimatedArrival}
                </div>
              ` : ''}
            </div>
          `).join('');
        }

        // Conflicts Rendering
        function renderConflicts() {
          const criticalConflicts = mockConflicts.filter(c => c.severity === 'critical' || c.severity === 'high');
          
          // Update critical alert
          const criticalAlert = document.getElementById('criticalAlert');
          if (criticalConflicts.length > 0) {
            criticalAlert.classList.remove('hidden');
            criticalAlert.querySelector('strong').textContent = `${criticalConflicts.length} Critical Conflict${criticalConflicts.length > 1 ? 's' : ''} Detected`;
          } else {
            criticalAlert.classList.add('hidden');
          }

          // Update conflicts count
          document.getElementById('conflictsCount').textContent = `${mockConflicts.length} Total`;

          // Render conflicts list
          const container = document.getElementById('conflictsList');
          container.innerHTML = mockConflicts.map(conflict => `
            <div class="conflict-item">
              <div class="conflict-header">
                <div class="conflict-type">
                  ${getConflictIcon(conflict.severity)}
                  <span>${formatConflictType(conflict.conflictType)} Conflict</span>
                </div>
                <span class="badge ${getSeverityBadgeClass(conflict.severity)}">${conflict.severity.toUpperCase()}</span>
              </div>
              <div class="conflict-details">
                <div>
                  <i class="fas fa-users"></i>
                  Trains: ${conflict.trainsInvolved.join(', ')}
                </div>
                <div>Location: ${conflict.location}</div>
              </div>
              <div class="ai-recommendation">
                <div class="recommendation-header">
                  <i class="fas fa-bolt"></i>
                  AI Recommendation:
                </div>
                <div class="recommendation-text">${conflict.recommendedAction}</div>
                <div style="margin-top: 0.25rem; font-size: 0.75rem; color: var(--muted-foreground);">
                  Impact: ${conflict.impactMinutes} minute delay
                </div>
              </div>
              <div class="conflict-actions">
                ${state.implementedActions.includes(conflict.id) ? 
                  '<span class="badge success"><i class="fas fa-check-circle"></i> Implemented</span>' :
                  `<button class="btn btn-primary btn-sm" onclick="implementAction('${conflict.id}')">Implement Action</button>`
                }
                <button class="btn btn-outline btn-sm">Simulate Impact</button>
              </div>
            </div>
          `).join('');
        }

        // KPI Dashboard
        function renderKPIDashboard() {
          const onTimeTrains = mockTrains.filter(train => train.delay <= 2).length;
          const delayedTrains = mockTrains.filter(train => train.delay > 2).length;
          const punctualityRate = (onTimeTrains / mockTrains.length) * 100;
          const averageDelay = mockTrains.reduce((sum, train) => sum + train.delay, 0) / mockTrains.length;

          const kpiData = [
            {
              title: 'Punctuality Rate',
              value: punctualityRate.toFixed(1),
              unit: '%',
              icon: 'fa-bullseye',
              color: 'green',
              trend: 'up',
              trendValue: 5.4
            },
            {
              title: 'Average Delay',
              value: averageDelay.toFixed(1),
              unit: 'min',
              icon: 'fa-clock',
              color: averageDelay <= 5 ? 'green' : 'yellow',
              trend: 'down',
              trendValue: 1.6
            },
            {
              title: 'Train Throughput',
              value: '156',
              unit: 'trains',
              icon: 'fa-train',
              color: 'blue',
              trend: 'up',
              trendValue: 9.9
            },
            {
              title: 'Track Utilization',
              value: '78.3',
              unit: '%',
              icon: 'fa-chart-line',
              color: 'yellow',
              trend: 'up',
              trendValue: 8.7
            },
            {
              title: 'Conflicts Resolved',
              value: '23',
              icon: 'fa-check-circle',
              color: 'purple',
              trend: 'up',
              trendValue: 21.1
            },
            {
              title: 'Total Trains Today',
              value: '178',
              icon: 'fa-bolt',
              color: 'blue',
              trend: 'up',
              trendValue: 7.9
            }
          ];

          document.getElementById('kpiGrid').innerHTML = kpiData.map(kpi => `
            <div class="kpi-card">
              <div class="kpi-header-section">
                <div class="kpi-icon ${kpi.color}">
                  <i class="fas ${kpi.icon}"></i>
                </div>
                ${kpi.trend ? `
                  <div class="trend-indicator trend-${kpi.trend}">
                    <i class="fas fa-arrow-${kpi.trend === 'up' ? 'up' : 'down'}"></i>
                    <span>${kpi.trendValue}%</span>
                  </div>
                ` : ''}
              </div>
              <div class="kpi-value">${kpi.value}${kpi.unit || ''}</div>
              <div class="kpi-label">${kpi.title}</div>
            </div>
          `).join('');
        }

        // Track Layout
        function renderTrackLayout() {
          const container = document.getElementById('trackLayout');
          
          if (state.layoutView === 'schematic') {
            container.innerHTML = `
              <div class="track-section">
                <h4>Main Lines</h4>
                <div class="track-lines">
                  ${trackSections.filter(s => s.type === 'main').map(section => {
                    const train = trainPositions.find(t => t.sectionId === section.id);
                    return `
                      <div class="track-line ${section.status}" onclick="selectSection('${section.id}')">
                        <span class="track-name">${section.name}</span>
                        ${train ? `
                          <div class="track-train ${train.type}" style="left: ${train.position}%">
                            <i class="fas fa-train"></i>
                          </div>
                        ` : ''}
                      </div>
                    `;
                  }).join('')}
                </div>
              </div>
              
              <div class="track-section">
                <h4>Platforms</h4>
                <div class="platforms-grid">
                  ${trackSections.filter(s => s.type === 'platform').map(section => {
                    const train = trainPositions.find(t => t.sectionId === section.id);
                    return `
                      <div class="platform ${section.status}" onclick="selectSection('${section.id}')">
                        <div class="platform-name">${section.name}</div>
                        <div class="platform-status">
                          ${train ? `<span class="badge">${train.trainNumber}</span>` : 'Available'}
                        </div>
                      </div>
                    `;
                  }).join('')}
                </div>
              </div>
              
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                <div class="track-section">
                  <h4>Loop Lines</h4>
                  <div class="track-lines">
                    ${trackSections.filter(s => s.type === 'loop').map(section => {
                      const train = trainPositions.find(t => t.sectionId === section.id);
                      return `
                        <div class="track-line ${section.status}" onclick="selectSection('${section.id}')" style="height: 48px;">
                          <span class="track-name">${section.name}</span>
                          ${train ? `<span style="font-size: 0.75rem;"><i class="fas fa-train"></i> ${train.trainNumber}</span>` : ''}
                        </div>
                      `;
                    }).join('')}
                  </div>
                </div>
                
                <div class="track-section">
                  <h4>Yard & Junction</h4>
                  <div class="track-lines">
                    ${trackSections.filter(s => s.type === 'yard' || s.type === 'junction').map(section => `
                      <div class="track-line ${section.status}" onclick="selectSection('${section.id}')" style="height: 48px;">
                        <span class="track-name">${section.name}</span>
                        <span style="font-size: 0.75rem; color: var(--muted-foreground);">
                          ${section.type === 'yard' ? `Capacity: ${section.capacity}` : 'Control Point'}
                        </span>
                      </div>
                    `).join('')}
                  </div>
                </div>
              </div>
            `;
          } else {
            // Detailed view - show more information
            container.innerHTML = trackSections.map(section => {
              const train = trainPositions.find(t => t.sectionId === section.id);
              return `
                <div class="track-line ${section.status}" onclick="selectSection('${section.id}')" style="height: auto; padding: 1rem; margin-bottom: 0.5rem;">
                  <div class="flex items-center justify-between" style="margin-bottom: 0.5rem;">
                    <div class="flex items-center gap-0.75rem;">
                      <div class="status-dot ${section.status}"></div>
                      <div>
                        <div class="track-name" style="font-size: 0.875rem;">${section.name}</div>
                        <div style="font-size: 0.75rem; color: var(--muted-foreground); text-transform: capitalize;">
                          ${section.type} • ${section.length}m • Capacity: ${section.capacity}
                        </div>
                      </div>
                    </div>
                    <span class="badge" style="text-transform: capitalize;">${section.status}</span>
                  </div>
                  
                  ${train ? `
                    <div class="flex items-center justify-between" style="font-size: 0.75rem; background-color: var(--muted); padding: 0.5rem; border-radius: calc(var(--radius) / 2);">
                      <div class="flex items-center gap-0.5rem;">
                        <i class="fas fa-train"></i>
                        <span style="font-weight: 600;">${train.trainNumber}</span>
                        <span class="badge" style="text-transform: capitalize;">${train.type}</span>
                      </div>
                      <div class="flex items-center gap-0.5rem; color: var(--muted-foreground);">
                        ${train.speed > 0 ? `
                          <i class="fas fa-bolt"></i>
                          <span>${train.speed} km/h</span>
                        ` : `
                          <i class="fas fa-clock"></i>
                          <span>Stationary</span>
                        `}
                      </div>
                    </div>
                  ` : ''}
                </div>
              `;
            }).join('');
          }
        }

        // Operations Overview
        function renderOperationsOverview() {
          const onTimeTrains = mockTrains.filter(train => train.delay <= 2).length;
          const delayedTrains = mockTrains.filter(train => train.delay > 2).length;
          const punctualityRate = (onTimeTrains / mockTrains.length) * 100;

          document.getElementById('operationsOverview').innerHTML = `
            <div class="stats-grid">
              <div class="stat-card on-time">
                <div class="stat-header">
                  <i class="fas fa-check-circle" style="color: var(--green-500);"></i>
                  <span>On Time</span>
                </div>
                <div class="stat-value on-time">${onTimeTrains}</div>
              </div>
              <div class="stat-card delayed">
                <div class="stat-header">
                  <i class="fas fa-exclamation-triangle" style="color: var(--red-500);"></i>
                  <span>Delayed</span>
                </div>
                <div class="stat-value delayed">${delayedTrains}</div>
              </div>
            </div>
            
            <div class="punctuality-section">
              <div class="punctuality-header">
                <span>Section Punctuality</span>
                <span style="font-weight: 600;">${punctualityRate.toFixed(1)}%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: ${punctualityRate}%;"></div>
              </div>
            </div>

            <div>
              <h4 style="margin-bottom: 0.75rem;">Active Trains</h4>
              <div class="active-trains">
                ${mockTrains.slice(0, 4).map(train => `
                  <div class="train-item-small">
                    <div class="train-header-small">
                      <div class="flex items-center gap-0.5rem;">
                        <i class="fas fa-train"></i>
                        <span style="font-weight: 600;">${train.number}</span>
                        <span class="badge priority-${train.priority}">P${train.priority}</span>
                      </div>
                      <div class="status-dot ${train.status}"></div>
                    </div>
                    <div style="color: var(--muted-foreground);">${train.name}</div>
                    <div class="flex items-center justify-between">
                      <span>${train.currentLocation}</span>
                      ${train.delay > 0 ? `
                        <div class="flex items-center gap-0.25rem; color: var(--red-500);">
                          <i class="fas fa-clock"></i>
                          <span>+${train.delay}m</span>
                        </div>
                      ` : ''}
                    </div>
                    ${train.platformAssigned ? `
                      <div style="color: var(--muted-foreground); margin-top: 0.25rem;">
                        Platform ${train.platformAssigned} • ETA: ${train.estimatedArrival}
                      </div>
                    ` : ''}
                  </div>
                `).join('')}
              </div>
            </div>
          `;
        }

        // Alerts System
        function renderAlertsSystem() {
          const criticalCount = mockAlerts.filter(a => a.type === 'critical' && !a.acknowledged).length;
          const unacknowledgedCount = mockAlerts.filter(a => !a.acknowledged).length;

          const filteredAlerts = mockAlerts.filter(alert => {
            switch (state.alertFilter) {
              case 'unacknowledged': return !alert.acknowledged;
              case 'critical': return alert.type === 'critical';
              default: return true;
            }
          });

          document.getElementById('alertsSystem').innerHTML = `
            <div class="alerts-header">
              <div class="alerts-status">
                <div class="flex items-center gap-0.25rem;">
                  ${criticalCount > 0 ? 
                    '<i class="fas fa-exclamation-triangle" style="color: var(--red-500);"></i>' :
                    '<i class="fas fa-check-circle" style="color: var(--green-500);"></i>'
                  }
                  <span style="font-weight: 600;">
                    ${criticalCount > 0 ? `${criticalCount} Critical` : 'All Clear'}
                  </span>
                </div>
                ${unacknowledgedCount > 0 ? `<span class="badge">${unacknowledgedCount} New</span>` : ''}
              </div>
              <button class="btn btn-sm" style="padding: 0.25rem;">
                <i class="fas fa-bell"></i>
              </button>
            </div>

            <div class="alerts-filters">
              <button class="btn btn-sm ${state.alertFilter === 'all' ? 'active' : ''}" onclick="setAlertFilter('all')">
                All (${mockAlerts.length})
              </button>
              <button class="btn btn-sm ${state.alertFilter === 'unacknowledged' ? 'active' : ''}" onclick="setAlertFilter('unacknowledged')">
                New (${unacknowledgedCount})
              </button>
              <button class="btn btn-sm ${state.alertFilter === 'critical' ? 'active' : ''}" onclick="setAlertFilter('critical')">
                Critical (${criticalCount})
              </button>
            </div>

            ${criticalCount > 0 ? `
              <div class="critical-alert">
                <i class="fas fa-exclamation-triangle"></i>
                <div>
                  <strong>${criticalCount} critical alert${criticalCount > 1 ? 's' : ''} requiring immediate attention.</strong>
                </div>
              </div>
            ` : ''}

            <div class="alerts-list">
              ${filteredAlerts.length === 0 ? `
                <div class="text-center" style="padding: 2rem; color: var(--muted-foreground);">
                  <i class="fas fa-check-circle" style="font-size: 2rem; opacity: 0.5; margin-bottom: 0.5rem; display: block;"></i>
                  <p>No alerts matching current filter</p>
                </div>
              ` : filteredAlerts.map(alert => `
                <div class="alert-item ${!alert.acknowledged ? 'unacknowledged' : ''}">
                  <div class="alert-header">
                    <div class="alert-content">
                      <div class="alert-title">
                        ${getAlertIcon(alert.type)}
                        <span>${alert.title}</span>
                        <span class="badge ${getCategoryBadgeClass(alert.category)}">${alert.category}</span>
                        ${alert.actionRequired ? '<span class="badge destructive">Action Required</span>' : ''}
                      </div>
                      <div class="alert-message">${alert.message}</div>
                      <div class="alert-meta">
                        <i class="fas fa-clock"></i>
                        <span>${formatTimeAgo(alert.timestamp)}</span>
                        ${alert.location ? `<span>• ${alert.location}</span>` : ''}
                        ${alert.relatedTrains ? `<span>• Trains: ${alert.relatedTrains.join(', ')}</span>` : ''}
                      </div>
                    </div>
                    <div class="alert-actions">
                      ${!alert.acknowledged ? 
                        `<button class="btn btn-outline btn-sm" onclick="acknowledgeAlert('${alert.id}')">Ack</button>` : ''
                      }
                      <button class="btn btn-sm" onclick="dismissAlert('${alert.id}')" style="padding: 0.25rem 0.5rem;">
                        <i class="fas fa-times"></i>
                      </button>
                    </div>
                  </div>
                </div>
              `).join('')}
            </div>

            ${unacknowledgedCount > 0 ? `
              <div class="flex gap-0.5rem" style="margin-top: 1rem;">
                <button class="btn btn-outline btn-sm flex-1" onclick="acknowledgeAllAlerts()">
                  Acknowledge All
                </button>
                <button class="btn btn-outline btn-sm flex-1" onclick="clearAcknowledgedAlerts()">
                  Clear Acknowledged
                </button>
              </div>
            ` : ''}
          `;
        }

        // Simulation
        function renderScenariosList() {
          document.getElementById('scenariosList').innerHTML = predefinedScenarios.map(scenario => `
            <div class="scenario-item ${state.selectedScenario === scenario.id ? 'selected' : ''}" onclick="selectScenario('${scenario.id}')">
              <div class="scenario-header">
                <span class="scenario-name">${scenario.name}</span>
                <div class="flex items-center gap-0.25rem;">
                  ${scenario.parameters.emergencyEvents ? '<i class="fas fa-exclamation-triangle" style="color: var(--red-500);"></i>' : ''}
                  <span class="badge">${scenario.parameters.trafficDensity}% density</span>
                </div>
              </div>
              <div class="scenario-description">${scenario.description}</div>
              <div class="scenario-metrics">
                <span style="color: var(--muted-foreground);">Expected:</span>
                <span style="color: var(--green-500);">${scenario.expectedOutcome.punctuality}% punctuality</span>
                <span style="color: var(--red-500);">${scenario.expectedOutcome.averageDelay}m delay</span>
              </div>
            </div>
          `).join('');
        }

        function toggleSimulationMode() {
          const predefined = document.getElementById('predefinedScenarios');
          const custom = document.getElementById('customParameters');
          
          if (state.simulationMode === 'custom') {
            predefined.classList.add('hidden');
            custom.classList.remove('hidden');
            document.querySelector('.toggle-label:first-child').classList.remove('active');
            document.querySelector('.toggle-label:last-child').classList.add('active');
          } else {
            predefined.classList.remove('hidden');
            custom.classList.add('hidden');
            document.querySelector('.toggle-label:first-child').classList.add('active');
            document.querySelector('.toggle-label:last-child').classList.remove('active');
          }
        }

        function selectScenario(scenarioId) {
          state.selectedScenario = scenarioId;
          renderScenariosList();
        }

        function runSimulation() {
          const runBtn = document.getElementById('runSimulation');
          const resultsDiv = document.getElementById('simulationResults');
          
          if (state.simulationMode === 'predefined' && !state.selectedScenario) {
            alert('Please select a scenario first');
            return;
          }

          state.isSimulationRunning = true;
          runBtn.innerHTML = '<i class="fas fa-pause"></i> Running...';
          runBtn.disabled = true;

          // Show loading state
          resultsDiv.innerHTML = `
            <div class="text-center" style="padding: 2rem;">
              <i class="fas fa-cog fa-spin" style="font-size: 2rem; margin-bottom: 1rem; display: block;"></i>
              <p>Running simulation...</p>
            </div>
          `;
          resultsDiv.classList.remove('hidden');

          // Simulate processing delay
          setTimeout(() => {
            const results = calculateSimulationResults();
            renderSimulationResults(results);
            
            state.isSimulationRunning = false;
            runBtn.innerHTML = '<i class="fas fa-play"></i> Run Simulation';
            runBtn.disabled = false;
          }, 3000);
        }

        function calculateSimulationResults() {
          // Get parameters based on mode
          let params;
          if (state.simulationMode === 'predefined' && state.selectedScenario) {
            const scenario = predefinedScenarios.find(s => s.id === state.selectedScenario);
            params = scenario.parameters;
          } else {
            params = {
              trafficDensity: parseInt(document.getElementById('trafficDensity').value),
              weatherConditions: document.getElementById('weatherConditions').value,
              maintenanceBlocks: parseInt(document.getElementById('maintenanceBlocks').value),
              emergencyEvents: document.getElementById('emergencyEvents').checked
            };
          }

          // Calculate results based on parameters (simplified simulation)
          let basePunctuality = 90;
          let baseDelay = 2.5;
          let baseConflicts = 5;
          let baseThroughput = 150;

          // Apply weather impact
          if (params.weatherConditions === 'rain') {
            basePunctuality -= 15;
            baseDelay += 5;
            baseConflicts += 8;
            baseThroughput -= 20;
          } else if (params.weatherConditions === 'fog') {
            basePunctuality -= 20;
            baseDelay += 8;
            baseConflicts += 12;
            baseThroughput -= 30;
          } else if (params.weatherConditions === 'storm') {
            basePunctuality -= 35;
            baseDelay += 15;
            baseConflicts += 20;
            baseThroughput -= 50;
          }

          // Apply traffic density impact
          const densityFactor = params.trafficDensity / 100;
          basePunctuality -= (densityFactor - 0.7) * 40;
          baseDelay += (densityFactor - 0.7) * 10;
          baseConflicts += Math.floor((densityFactor - 0.5) * 25);
          baseThroughput += Math.floor((densityFactor - 0.5) * 100);

          // Apply maintenance impact
          basePunctuality -= params.maintenanceBlocks * 5;
          baseDelay += params.maintenanceBlocks * 2;
          baseConflicts += params.maintenanceBlocks * 3;
          baseThroughput -= params.maintenanceBlocks * 15;

          // Apply emergency events impact
          if (params.emergencyEvents) {
            basePunctuality -= 25;
            baseDelay += 12;
            baseConflicts += 15;
            baseThroughput -= 25;
          }

          // Ensure reasonable bounds
          basePunctuality = Math.max(30, Math.min(100, basePunctuality));
          baseDelay = Math.max(0, baseDelay);
          baseConflicts = Math.max(0, baseConflicts);
          baseThroughput = Math.max(50, baseThroughput);

          const recommendations = [];
          if (basePunctuality < 70) {
            recommendations.push('Consider implementing express train corridors');
          }
          if (baseDelay > 10) {
            recommendations.push('Optimize signal timing and block sections');
          }
          if (baseConflicts > 15) {
            recommendations.push('Increase use of loop lines for freight trains');
          }
          if (params.weatherConditions !== 'clear') {
            recommendations.push('Implement weather-based speed restrictions');
          }
          if (params.emergencyEvents) {
            recommendations.push('Activate emergency response protocols');
          }

          return {
            punctuality: Math.round(basePunctuality * 10) / 10,
            averageDelay: Math.round(baseDelay * 10) / 10,
            conflicts: Math.round(baseConflicts),
            throughput: Math.round(baseThroughput),
            recommendations
          };
        }

        function renderSimulationResults(results) {
          const performanceLevel = results.punctuality >= 80 ? 'excellent' : 
                                  results.punctuality >= 70 ? 'good' : 
                                  results.punctuality >= 60 ? 'fair' : 'poor';

          document.getElementById('simulationResults').innerHTML = `
            <h4 style="margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
              <i class="fas fa-chart-line"></i>
              Simulation Results
            </h4>
            
            <div class="results-grid">
              <div class="result-card">
                <div class="result-label">Punctuality Rate</div>
                <div class="result-value">${results.punctuality}%</div>
              </div>
              <div class="result-card">
                <div class="result-label">Average Delay</div>
                <div class="result-value">${results.averageDelay}m</div>
              </div>
              <div class="result-card">
                <div class="result-label">Conflicts</div>
                <div class="result-value">${results.conflicts}</div>
              </div>
              <div class="result-card">
                <div class="result-label">Throughput</div>
                <div class="result-value">${results.throughput}</div>
              </div>
            </div>

            <div style="margin-bottom: 1rem;">
              <h5 style="margin-bottom: 0.5rem;">Performance Assessment</h5>
              <div class="flex items-center justify-between">
                <span>Overall Performance</span>
                <span class="badge ${performanceLevel === 'excellent' ? 'success' : 
                                    performanceLevel === 'good' ? '' : 
                                    performanceLevel === 'fair' ? '' : 'destructive'}">
                  ${performanceLevel === 'excellent' ? '<i class="fas fa-check-circle"></i> Excellent' :
                    performanceLevel === 'good' ? 'Good' :
                    performanceLevel === 'fair' ? 'Fair' :
                    '<i class="fas fa-exclamation-triangle"></i> Poor'}
                </span>
              </div>
            </div>

            ${results.recommendations.length > 0 ? `
              <div class="recommendations">
                <h5 style="margin-bottom: 0.5rem;">AI Recommendations</h5>
                ${results.recommendations.map(rec => `
                  <div class="recommendation-item">
                    <i class="fas fa-check-circle" style="color: var(--blue-500); margin-top: 0.125rem;"></i>
                    <span>${rec}</span>
                  </div>
                `).join('')}
              </div>
            ` : ''}

            <div class="flex gap-0.5rem">
              <button class="btn btn-outline btn-sm flex-1">Export Report</button>
              <button class="btn btn-outline btn-sm flex-1">Compare Scenarios</button>
            </div>
          `;
        }

        function resetSimulation() {
          state.selectedScenario = '';
          state.isSimulationRunning = false;
          document.getElementById('simulationResults').classList.add('hidden');
          document.getElementById('trafficDensity').value = 75;
          document.getElementById('densityValue').textContent = '75';
          document.getElementById('weatherConditions').value = 'clear';
          document.getElementById('maintenanceBlocks').value = 1;
          document.getElementById('emergencyEvents').checked = false;
          renderScenariosList();
        }

        // Event Handlers
        function implementAction(conflictId) {
          state.implementedActions.push(conflictId);
          renderConflicts();
        }

        function selectSection(sectionId) {
          console.log('Selected section:', sectionId);
          // Could show detailed section information in a modal
        }

        function setAlertFilter(filter) {
          state.alertFilter = filter;
          renderAlertsSystem();
        }

        function acknowledgeAlert(alertId) {
          const alert = mockAlerts.find(a => a.id === alertId);
          if (alert) {
            alert.acknowledged = true;
            renderAlertsSystem();
          }
        }

        function dismissAlert(alertId) {
          const index = mockAlerts.findIndex(a => a.id === alertId);
          if (index !== -1) {
            mockAlerts.splice(index, 1);
            renderAlertsSystem();
          }
        }

        function acknowledgeAllAlerts() {
          mockAlerts.forEach(alert => alert.acknowledged = true);
          renderAlertsSystem();
        }

        function clearAcknowledgedAlerts() {
          mockAlerts = mockAlerts.filter(alert => alert.type === 'critical' || !alert.acknowledged);
          renderAlertsSystem();
        }

        function updateLayoutViewButtons() {
          document.querySelectorAll('[data-view]').forEach(btn => {
            btn.classList.toggle('active', btn.dataset.view === state.layoutView);
          });
        }

        // Utility Functions
        function getTrainEmoji(type) {
          switch (type) {
            case 'express': return '🚄';
            case 'local': return '🚃';
            case 'freight': return '🚛';
            case 'maintenance': return '🔧';
            case 'special': return '⭐';
            default: return '🚂';
          }
        }

        function getStatusBadgeClass(status) {
          switch (status) {
            case 'on-time': return '';
            case 'approaching': return '';
            case 'delayed': return 'destructive';
            case 'waiting': return '';
            case 'departed': return '';
            default: return '';
          }
        }

        function formatStatus(status) {
          return status.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase());
        }

        function getConflictIcon(severity) {
          switch (severity) {
            case 'critical':
            case 'high':
              return '<i class="fas fa-exclamation-triangle"></i>';
            case 'medium':
              return '<i class="fas fa-clock"></i>';
            case 'low':
              return '<i class="fas fa-check-circle"></i>';
            default:
              return '<i class="fas fa-exclamation-triangle"></i>';
          }
        }

        function formatConflictType(type) {
          return type.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase());
        }

        function getSeverityBadgeClass(severity) {
          switch (severity) {
            case 'critical':
            case 'high':
              return 'destructive';
            case 'medium':
              return '';
            case 'low':
              return '';
            default: return '';
          }
        }

        function getAlertIcon(type) {
          switch (type) {
            case 'critical': return '<i class="fas fa-exclamation-triangle" style="color: var(--red-500);"></i>';
            case 'warning': return '<i class="fas fa-exclamation-triangle" style="color: var(--yellow-500);"></i>';
            case 'info': return '<i class="fas fa-bolt" style="color: var(--blue-500);"></i>';
            case 'success': return '<i class="fas fa-check-circle" style="color: var(--green-500);"></i>';
            default: return '<i class="fas fa-exclamation-triangle"></i>';
          }
        }

        function getCategoryBadgeClass(category) {
          switch (category) {
            case 'safety': return 'destructive';
            case 'operational': return '';
            case 'system': return '';
            case 'weather': return '';
            case 'maintenance': return '';
            default: return '';
          }
        }

        function formatTimeAgo(timestamp) {
          const minutes = Math.floor((Date.now() - timestamp.getTime()) / 60000);
          if (minutes < 1) return 'Just now';
          if (minutes < 60) return `${minutes}m ago`;
          const hours = Math.floor(minutes / 60);
          return `${hours}h ago`;
        }

        // Real-time updates
        function updateRealTimeData() {
          // Simulate real-time data updates
          
          // Randomly update train delays
          mockTrains.forEach(train => {
            if (Math.random() < 0.1) { // 10% chance to update
              train.delay = Math.max(0, train.delay + (Math.random() - 0.5) * 2);
              train.actualTime = addMinutesToTime(train.scheduledTime, train.delay);
            }
          });

          // Occasionally add new alerts
          if (Math.random() < 0.1) { // 10% chance
            const newAlert = {
              id: Date.now().toString(),
              type: Math.random() < 0.1 ? 'critical' : Math.random() < 0.4 ? 'warning' : 'info',
              category: ['operational', 'system', 'weather'][Math.floor(Math.random() * 3)],
              title: 'System Update',
              message: 'New operational status update available.',
              timestamp: new Date(),
              acknowledged: false,
              actionRequired: Math.random() < 0.3
            };
            
            mockAlerts.unshift(newAlert);
            if (mockAlerts.length > 20) mockAlerts.pop(); // Keep only last 20
          }

          // Update displays
          renderTrainList();
          renderKPIDashboard();
          renderOperationsOverview();
          renderAlertsSystem();
        }

        function addMinutesToTime(timeString, minutes) {
          const [hours, mins] = timeString.split(':').map(Number);
          const totalMinutes = hours * 60 + mins + minutes;
          const newHours = Math.floor(totalMinutes / 60) % 24;
          const newMins = totalMinutes % 60;
          return `${newHours.toString().padStart(2, '0')}:${newMins.toString().padStart(2, '0')}`;
        }
    </script>
</body>
</html>